<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kidzpark.board.mapper.BoardMapper">

<select id="selectMenuname"
  resultType="String">
   
   SELECT  M_NAME
   FROM    MENU
   WHERE   M_NO = #{m_no}
	
</select>

  <select id="getboardlist"
  resultType="com.kidzpark.board.domain.BoardVo">
   SELECT *
FROM (
    SELECT ROWNUM RN, A.*
    FROM (
   SELECT  *
   FROM    BOARD
   WHERE   M_NO = #{m_no}
    ) A
)
WHERE RN BETWEEN #{pg.start} AND #{pg.end} 
	
</select>

  <select id="selectBoardSearchList"
  resultType="com.kidzpark.board.domain.BoardVo">
   SELECT *
FROM (
    SELECT ROWNUM RN, A.*
    FROM (
   SELECT  *
   FROM    BOARD
   WHERE   M_NO = #{m_no}
   <if test="searchOption != 'all' and searchKeyword != ''">
        AND UPPER(${searchOption}) LIKE '%' || UPPER(#{searchKeyword}) || '%'
    </if>
    ) A
)
WHERE RN BETWEEN #{pg.start} AND #{pg.end} 
	
</select>

<select id="countboard"
  resultType="int">
   
   SELECT  COUNT(*)
   FROM    BOARD
   WHERE   M_NO = #{m_no}
	
</select>

<select id="countBoardSearchList"
  resultType="int">
   
   SELECT  COUNT(*)
   FROM    BOARD
   WHERE   M_NO = #{m_no}
   <if test="searchOption != 'all' and searchKeyword != ''">
        AND UPPER(${searchOption}) LIKE '%' || UPPER(#{searchKeyword}) || '%'
    </if>
	
</select>

  <insert  id="BoardWrite1">
     INSERT INTO  BOARD (
        B_IDX,
		B_TITLE,
		B_CONT,
		B_LIKE,
		B_READCOUNT,
		B_WRITEDATE,
		M_NO,
		U_NO
     ) VALUES (
          ( SELECT  NVL(MAX(B_IDX), 0)+1 FROM BOARD ),
		#{b_title},
		#{b_cont},
		0,
		0,
		SYSDATE,
		#{m_no},
		#{u_no}
     )
  </insert>
  
  <insert  id="BoardWrite2">
       INSERT INTO  BOARD (
        B_IDX,
		B_TITLE,
		B_CONT,
		B_IMG,
		B_LIKE,
		B_READCOUNT,
		B_WRITEDATE,
		M_NO,
		U_NO
     ) VALUES (
          ( SELECT  NVL(MAX(B_IDX), 0)+1 FROM BOARD ),
		#{b_title},
		#{b_cont},
		#{b_img},
		0,
		0,
		SYSDATE,
		#{m_no},
		#{u_no}
     )
  </insert>









  <insert  id="boardInsert">
     INSERT INTO  BOARDBOOT (
          BNO,
          TITLE,
          WRITER,
          CONTENT
     ) VALUES (
          ( SELECT  NVL(MAX(BNO), 0)+1 FROM BOARDBOOT ),
          #{title},
          #{writer},
          #{content}
     )
  </insert>
  
  

  <select id="boardView"
  resultType="map">
   
   SELECT  *
   FROM    BOARD
   WHERE   B_IDX = #{b_idx}
	
</select>

<update id="updateReadcount">
UPDATE BOARD SET 
B_READCOUNT = (B_READCOUNT+1)
WHERE B_IDX = #{b_idx} 
</update>

<delete id="boardDelete">
DELETE FROM BOARDBOOT
WHERE BNO = #{bno}

</delete>

<update id="boardUpdate">
UPDATE BOARDBOOT SET 
TITLE = #{title},
WRITER = #{writer},
CONTENT = #{content}
WHERE BNO = #{bno} 

</update>


</mapper>